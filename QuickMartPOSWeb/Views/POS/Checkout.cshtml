@await Html.PartialAsync("~/Views/Shared/Style.cshtml")

@{
    ViewData["Title"] = "Checkout";
}

<div class="header print-only">
    <div class="logo">
        <img src="~/dc378e6e-ecd3-4336-8e2c-efd4b2ff7c3a.jpeg" alt="Maskey Grocery Mart Logo" class="logo-icon" />
    </div>

    <div class="store-info">
        <h1>Maskey Grocery Mart</h1>
        <p>Lalitpur, Nepal</p>
        <p>Phone: 048540733</p>
    </div>
</div>

<h2>Receipt</h2>

<div class="table-container">
    <table id="product-table">

    <tr>
        <th>Name</th>
        <th>Quantity</th>
        <th>Price</th>
        <th>Total</th>
    </tr>
    @foreach (var item in ViewBag.Transaction.Items)
    {
        <tr>
            <td>@item.Product.Name</td>
            <td>@item.Quantity</td>
            <td>$@item.Product.Price.ToString("F2")</td>
            <td>$@((item.Product.Price * item.Quantity).ToString("F2"))</td>
        </tr>
    }
</table>
</div>

@if (ViewBag.Warning != null)
{
    <p class="warning">@ViewBag.Warning</p>
}


<div class="receipt-summary">
    <div class="summary-row">
        <span class="label">Subtotal:</span>
        <span class="value">$@ViewBag.Transaction.Subtotal.ToString("F2")</span>
    </div>
    <div class="summary-row">
        <span class="label">Tax:</span>
        <span class="value">$@ViewBag.Transaction.Tax.ToString("F2")</span>
    </div>
    <div class="summary-row total-row">
        <span class="label">Total:</span>
        <span class="value">$@ViewBag.Transaction.Total.ToString("F2")</span>
    </div>
    <div class="summary-row">
        <span class="label">Cash Paid:</span>
        <span class="value">$@ViewBag.CashAmount.ToString("F2")</span>
    </div>
    <div class="summary-row change-row">
        <span class="label">Change:</span>
        <span class="value">$@ViewBag.Change.ToString("F2")</span>
    </div>
</div>

@if (ViewBag.Warning != null)
{
    <a asp-action="POSInterface" class="btn btn-warning">🔄 Return to POS</a>
}
else
{
    <div class="receipt-actions">
        <a asp-action="POSInterface" class="btn new-btn">New Transaction</a>
        <button onclick="printReceipt()" class="btn print-btn">Print Receipt</button>
    </div>

}


<div class="footer">
    Thank you for shopping at MaskeykMart!<br />
    Visit us again :)
</div>

<script>
    function printReceipt() {
        window.print();
    }
</script>

    